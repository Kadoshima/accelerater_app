# Flutter Accelerater App - 機能一覧

## 1. センサー統合とデータ収集

### IMU（慣性計測装置）統合
- M5Stackデバイスへの Bluetooth接続
- リアルタイム加速度データ収集（X, Y, Z軸）
- ジャイロスコープデータ収集（X, Y, Z軸）
- 磁力計データ収集（X, Y, Z軸）
- 代替としてスマートフォン内蔵加速度センサーのサポート
- センサーデータのバッファリングと処理

### 心拍数モニタリング
- Bluetooth心拍センサー接続
- リアルタイム心拍数データ収集
- 心拍数履歴追跡
- グラフによる心拍数可視化

## 2. 歩行解析システム

### FFTベース歩行解析
- 高速フーリエ変換を使用したリアルタイム歩数検出
- SPM（毎分歩数）計算
- 信頼性スコア付きケイデンス検出
- 歩行安定性解析
- 変動係数（CV）計算
- 単軸または多軸解析オプション
- 静止/動作検出閾値

## 3. 適応的テンポ制御

### スマートメトロノームシステム
- Flutterベースメトロノーム実装
- ネイティブプラットフォームメトロノームサポート
- 無意識的歩行誘導のための適応的テンポコントローラー
- 歩行パターンに基づくリアルタイムテンポ調整
- パーソナライゼーションパラメータ（応答性、安定性選好）
- コンフォートゾーン検出と微調整

## 4. 実験管理

### 実験タイプ
- 従来型順次実験
- ランダム順序実験
- 複数の実験条件：
  - 条件A：無意識的誘導（音のみ）
  - 条件B：意識的誘導（明示的指示）
  - 条件C：コントロール（音なし）

### 実験フェーズ
- 準備/キャリブレーションフェーズ
- ベースライン測定フェーズ
- 適応フェーズ
- 誘導フェーズ（増加/減少変動）
- 後効果測定
- 評価フェーズ

### フェーズ管理
- カスタムフェーズ期間
- 自動フェーズ遷移
- リアルタイムフェーズ追跡
- フェーズ固有のデータ収集

## 5. データ記録とエクスポート

### データ収集
- 時系列データ記録
- 実験セッションデータ
- 被験者情報保存
- GPS位置追跡
- 加速度データバッファリング（1時間容量）

### エクスポート機能
- CSVファイル生成
- Azure Blob Storage統合
- ローカルファイルストレージ
- 自動データアップロード
- セッションメタデータエクスポート

## 6. ユーザーインターフェース機能

### メイン画面
- アニメーション付きデバイス接続画面
- 実験制御画面
- リアルタイムデータ可視化
- デザインシステムデモ画面

### 可視化コンポーネント
- リアルタイムSPM/BPMグラフ
- 心拍数トレンド
- FFT振幅可視化
- 加速度データグラフ
- CV（変動係数）トレンドチャート
- フェーズ進行インジケーター

## 7. 音響とフィードバック

### メトロノーム機能
- 可変テンポ制御（40-180 BPM）
- クリック音波形生成
- 事前定義テンポプリセット
- スムーズなテンポ遷移
- 音量制御
- 振動フィードバックサポート

## 8. デバイス接続性

### Bluetooth機能
- マルチデバイスサポート（IMU + 心拍計）
- 自動再接続
- フィルター付きデバイススキャン
- サービスUUIDベース検出
- 接続状態管理
- 信号強度インジケーター

## 9. バックグラウンドサービス

### バックグラウンド処理
- バックグラウンドでの継続的データ収集
- ローカル通知サポート
- バックグラウンドサービス初期化
- 永続的データ記録

## 10. アーキテクチャ機能

### クリーンアーキテクチャ実装
- ドメイン層（エンティティ、リポジトリ、ユースケース）
- データ層（モデル、データソース、リポジトリ実装）
- プレゼンテーション層（画面、ウィジェット、プロバイダー）
- Riverpodによる依存性注入
- データアクセスのためのリポジトリパターン

## 11. 高度な解析機能

### SPM解析
- リアルタイム周波数解析
- ピーク検出アルゴリズム
- 平滑化とフィルタリング
- 信頼性スコアリング
- 履歴データ追跡

## 12. 設定と構成

### ユーザー設定
- メトロノームタイプ選択（Flutter/ネイティブ）
- 実験期間設定
- フェーズ期間カスタマイズ
- センサー軸選択
- 振動オン/オフ切り替え

## 13. エラー処理とロギング

### 堅牢なエラー管理
- 接続エラー処理
- データ検証
- グレースフルデグラデーション
- デバッグロギングシステム
- エラー回復メカニズム

## 14. テーマとUIデザイン

### デザインシステム
- ダークテーマ実装
- カスタムカラーパレット（AppColors）
- タイポグラフィシステム（AppTypography）
- スペーシングシステム（AppSpacing）
- 再利用可能UIコンポーネント（AppButton、AppCard、AppTextField）
- アニメーション付きUI要素

## 15. データモデルとエンティティ

### コアデータ構造
- センサーデータモデル
- 実験記録
- Bluetoothデバイスエンティティ
- 心拍数データモデル
- 実験セッション追跡
- フェーズ情報モデル

---

この包括的な歩行解析および適応的テンポ制御アプリケーションは、特に歩行パターンとリズミック聴覚刺激が歩行に与える影響を研究するための研究目的で設計されています。アプリは洗練されたリアルタイム解析機能を提供しながら、研究者と被験者の両方にとって使いやすいインターフェースを維持しています。